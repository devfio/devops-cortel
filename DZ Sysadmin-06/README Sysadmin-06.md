# ДЗ Файловые системы

1. Узнайте о sparse (разряженных) файлах.

Ответ:

Разрежённые файлы – это специальные файлы, которые с большей эффективностью используют файловую систему, они не позволяют ФС занимать свободное дисковое пространство носителя, когда разделы не заполнены.

2. Могут ли файлы, являющиеся жесткой ссылкой на один объект, иметь разные права доступа и владельца? Почему?
   Ответ:
   Не могут, т.к. жёсткая ссылка ведёт к оригинальному inode (индексному дескриптору), у которого есть своим права доступа и владельцы.
4. Сделайте vagrant destroy на имеющийся инстанс Ubuntu.

Ответ:

Новый инстанс Ubuntu создан.

4. Используя fdisk, разбейте первый диск на 2 раздела: 2 Гб, оставшееся пространство.
   Ответ:

![Alt text](../DZ Sysadmin-05/1.png)

5. Используя sfdisk, перенесите данную таблицу разделов на второй диск.

Ответ:

![Alt text](../DZ Sysadmin-05/2.png)

6. Соберите mdadm RAID1 на паре разделов 2 Гб.
   Ответ:

![Alt text](../DZ Sysadmin-05/3.png)

7. Соберите mdadm RAID0 на второй паре маленьких разделов.

Ответ:

![Alt text](../DZ Sysadmin-05/4.png)

8. Создайте 2 независимых PV на получившихся md-устройствах.
   Ответ:
   ![Alt text](../DZ Sysadmin-05/5.png)
9. Создайте общую volume-group на этих двух PV.
   Ответ:
   ![Alt text](../DZ Sysadmin-05/6.png)
10. Создайте LV размером 100 Мб, указав его расположение на PV с RAID0.
    Ответ:
    ![Alt text](../DZ Sysadmin-05/7.png)
11. Создайте mkfs.ext4 ФС на получившемся LV.
    Ответ:
    ![Alt text](../DZ Sysadmin-05/8.png)
12. Смонтируйте этот раздел в любую директорию, например, /tmp/new.
    Ответ:
    ![Alt text](../DZ Sysadmin-05/9.png)
13. Поместите туда тестовый файл, например wget https://mirror.yandex.ru/ubuntu/ls-lR.gz -O /tmp/new/test.gz.
    Ответ:
    ![Alt text](../DZ Sysadmin-05/10.png)
14. Прикрепите вывод lsblk.
    Ответ:
    ![Alt text](../DZ Sysadmin-05/11.png)
15. Протестируйте целостность файла.
    Ответ:
    ![Alt text](../DZ Sysadmin-05/12.png)
16. Используя pvmove, переместите содержимое PV с RAID0 на RAID1.
    Ответ:
    ![Alt text](../DZ Sysadmin-05/13.png)
17. Сделайте --fail на устройство в вашем RAID1 md.
    Ответ:
    ![Alt text](../DZ Sysadmin-05/14.png)
18. Подтвердите выводом dmesg, что RAID1 работает в деградированном состоянии.
    Ответ:
    ![Alt text](../DZ Sysadmin-05/15.png)
19. Протестируйте целостность файла, несмотря на "сбойный" диск он должен продолжать быть доступен.
    Ответ:
    ![Alt text](../DZ Sysadmin-05/16.png)
20. Погасите тестовый хост, vagrant destroy.
    Ответ:
    ![Alt text](../DZ Sysadmin-05/17.png)
